name: Test LTI Tools

on:
  - pull_request

jobs:
  main:
    runs-on: ubuntu-20.04
    steps:
      - name: install tools
        run: |
          sudo apt update -q
          sudo apt install -qqy patchutils curl

      - name: check diff for docs changes
        id: check-changes
        env:
          CHECK_PATH: /docs/*
        run: |
          if [ -n "$(curl -s -L ${{ json.event.pull_request.patch_url }} | lsdiff --include="?${CHECK_PATH}")" ]
          then
          echo '::set-output name=changed::true'
          fi

      - run: echo ${{ steps.check-changes.outputs.changed }}

      - run: echo ${{ steps.check-changess.outputs }}

      - name: Only if docs changes
        if: ${{ steps.check-changes.outputs.changed == 'true' }}
        run: |
          echo Docs have changed. Do something!
